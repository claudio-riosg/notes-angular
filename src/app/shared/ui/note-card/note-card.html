<article class="note-card">
    <header class="note-card__header">
      <h3 class="note-card__title">{{ note().title }}</h3>
      <div class="note-card__actions">
        <button 
          class="note-card__pin-btn"
          [class.note-card__pin-btn--active]="note().isPinned"
          (click)="onTogglePin($event)"
          type="button"
          [attr.aria-pressed]="note().isPinned"
          [disabled]="orchestrator.isUpdating(note().id) || orchestrator.isDeleting(note().id)"
          [attr.aria-busy]="orchestrator.isUpdating(note().id) || orchestrator.isDeleting(note().id)"
          aria-label="Toggle pin">
          ðŸ“Œ
        </button>
        <button 
          class="note-card__menu-btn"
          (click)="onMenuClick($event)"
          type="button"
          aria-haspopup="menu"
          [disabled]="orchestrator.isDeleting(note().id)"
          [attr.aria-busy]="orchestrator.isDeleting(note().id)"
          aria-label="Open note menu">
          â‹®
        </button>
      </div>
    </header>

    <div class="note-card__content">
      <p>{{ getPreviewContent() }}</p>
    </div>

    @if (note().tags && note().tags.length > 0) {
      <footer class="note-card__footer">
        <div class="note-card__tags">
          @for (tag of note().tags; track tag) {
            <button 
              class="note-card__tag"
              (click)="onTagClick($event, tag)"
              type="button"
              [attr.aria-label]="'Filter by tag ' + tag">
              #{{ tag }}
            </button>
          }
        </div>
        <time class="note-card__date">
          {{ formatDate(note().updatedAt) }}
        </time>
      </footer>
    }
</article>